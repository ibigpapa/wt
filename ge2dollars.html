<html>
    <head>
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="container" id="output">
            <form id="ge2dollars">
                <div class="row">
                    <div class="col">
                        <h2>Single GE Costs Calculator</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="input-group">
                            <span class="input-group-text">GEs in bundle</span>
                            <input type="number" id="ges_in_bundle" min="0" class="form-control" size="30" value="25000" />
                        </div>
                    </div>
                    <div class="col">
                        <div class="input-group">
                            <span class="input-group-text">Bundle Cost $</span>
                            <input type="number" id="units_for_bundle" step="0.01" min="0.00" class="form-control" size="30" value="165.00" />
                        </div>
                    </div>
                    <div class="col">
                        <div class="input-group">
                            <span class="input-group-text">= Cost per GE $</span>
                            <input type="number" id="cost_per_ge_for_bundle" disabled/>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <a target="_blank" href="https://store.gaijin.net/catalog.php?category=GoldenEagles">Gaijin GE Bundles Online</a>
                    </div>
                </div>
                <div>
                    <h2> Total Unit Costs </h2>
                </div>
                <div class="input-group col-sm-1 mb-3">
                    <span class="input-group-text">GE</span>
                    <input type="number" id="num_input" min="0" class="form-control" size="30">
                    <py-button id="button_cost"  label="Calc">
def on_click(evt):
    evt.preventDefault()
    cost_per_ge_for_bundle_elm = document.querySelector("#cost_per_ge_for_bundle")
    inp = document.querySelector("#num_input")
    div_out = document.querySelector("#output")
    val = int(inp.value)
    ge_const = float(cost_per_ge_for_bundle_elm.value)
    val_out = val * ge_const
    div_row = document.createElement("div")
    div_row.className = "row"
    div_row.id = "calc_list_row"
    div_col = document.createElement("div")
    div_col.className = "col"
    div_col.id = "calc_list_col"
    span = document.createElement("span")
    span.innerText = f"GE {val} * {ge_const} = ${val_out:.2f}"
    span.id = "calc_list_span"
    div_col.appendChild(span)
    div_row.appendChild(div_col)
    div_out.appendChild(div_row)
                    </py-button>
                    <py-button id="button_reset" label="Clear">
def on_click(evt):
    evt.preventDefault()
    elms = document.querySelectorAll("#calc_list_row")
    for elm in elms:
        elm.remove()
                    </py-button>
                </div>
            </form>
        </div>
        <py-script>
from pyodide import create_proxy

def on_single_ge_unit_cost_lost_focus(evt):
    ges_in_bundle_elm = document.querySelector("#ges_in_bundle")
    units_for_bundle_elm = document.querySelector("#units_for_bundle")
    cost_per_ge_for_bundle_elm = document.querySelector("#cost_per_ge_for_bundle")
    ges = int(ges_in_bundle_elm.value)
    units = float(units_for_bundle_elm.value)
    cost_per_ge_for_bundle_elm.value = units/ges


ges_in_bundle_elm = document.querySelector("#ges_in_bundle")
units_for_bundle_elm = document.querySelector("#units_for_bundle")
ges_in_bundle_elm.addEventListener("blur", create_proxy(on_single_ge_unit_cost_lost_focus))
units_for_bundle_elm.addEventListener("blur", create_proxy(on_single_ge_unit_cost_lost_focus))
on_single_ge_unit_cost_lost_focus(None)

        </py-script>
    </body>
</html>
